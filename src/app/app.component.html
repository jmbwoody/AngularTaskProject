<div class="container">
  <h1>To-Do List</h1>
  
  <div class="add-task">
    <input 
      [(ngModel)]="newTaskTitle" 
      placeholder="Task title"
      (keyup.enter)="addTask()"
    >
    <textarea 
      [(ngModel)]="newTaskDescription" 
      placeholder="Task description"
      (keyup.enter)="addTask()"
    ></textarea>
    <button (click)="addTask()">Add Task</button>
  </div>

  <div class="task-lists">
    <div class="task-list">
      <h2>To Do</h2>
      <div
        cdkDropList
        id="todoList"
        [cdkDropListData]="todoTasks"
        [cdkDropListConnectedTo]="['doneList']"
        class="task-container"
        (cdkDropListDropped)="drop($event)"
      >
        <div class="task-item" *ngFor="let task of todoTasks" cdkDrag>
          <div *ngIf="editingTask?.id !== task.id; else editMode">
            <h3>{{ task.title }}</h3>
            <p>{{ task.description }}</p>
            <div class="task-actions">
              <button (click)="startEditing(task)">Edit</button>
              <button (click)="deleteTask(task.id)">Delete</button>
            </div>
          </div>
          <ng-template #editMode>
            <div class="edit-form">
              <input [(ngModel)]="editingTask.title" placeholder="Title">
              <textarea [(ngModel)]="editingTask.description" placeholder="Description"></textarea>
              <div class="edit-actions">
                <button (click)="saveEdit()">Save</button>
                <button (click)="cancelEdit()">Cancel</button>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>

    <div class="task-list">
      <h2>Done</h2>
      <div
        cdkDropList
        id="doneList"
        [cdkDropListData]="doneTasks"
        [cdkDropListConnectedTo]="['todoList']"
        class="task-container"
        (cdkDropListDropped)="drop($event)"
      >
        <div class="task-item" *ngFor="let task of doneTasks" cdkDrag>
          <h3>{{ task.title }}</h3>
          <p>{{ task.description }}</p>
          <div class="task-actions">
            <button (click)="deleteTask(task.id)">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 