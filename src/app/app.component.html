<div class="container">
  <h1>Task Manager</h1>
  
  <!-- Add Task Form -->
  <p-card header="Add New Task" styleClass="mb-4">
    <div class="p-fluid">
      <div class="field">
        <label for="title">Title</label>
        <input id="title" type="text" pInputText [(ngModel)]="newTaskTitle" placeholder="Enter task title">
      </div>
      <div class="field">
        <label for="description">Description</label>
        <textarea id="description" pInputTextarea [(ngModel)]="newTaskDescription" placeholder="Enter task description" rows="3"></textarea>
      </div>
      <div class="field">
        <p-button label="Add Task" (onClick)="addTask()" [disabled]="!newTaskTitle.trim()"></p-button>
      </div>
    </div>
  </p-card>

  <div class="task-lists">
    <!-- To Do List -->
    <div class="task-list">
      <h2>To Do</h2>
      <div
        cdkDropList
        id="todoList"
        #todoList="cdkDropList"
        [cdkDropListData]="todoTasks"
        [cdkDropListConnectedTo]="[doneList]"
        class="task-container"
        (cdkDropListDropped)="drop($event)"
      >
        <div class="task-item" *ngFor="let task of todoTasks" cdkDrag>
          <p-card>
            <ng-template pTemplate="header">
              <div class="task-header">
                <h3>{{ task.title }}</h3>
                <div class="task-actions">
                  <p-button icon="pi pi-pencil" (onClick)="startEditing(task)" styleClass="p-button-text"></p-button>
                  <p-button icon="pi pi-trash" (onClick)="deleteTask(task.id)" styleClass="p-button-text p-button-danger"></p-button>
                </div>
              </div>
            </ng-template>
            <p>{{ task.description }}</p>
          </p-card>
        </div>
      </div>
    </div>

    <!-- Done List -->
    <div class="task-list">
      <h2>Done</h2>
      <div
        cdkDropList
        id="doneList"
        #doneList="cdkDropList"
        [cdkDropListData]="doneTasks"
        [cdkDropListConnectedTo]="[todoList]"
        class="task-container"
        (cdkDropListDropped)="drop($event)"
      >
        <div class="task-item" *ngFor="let task of doneTasks" cdkDrag>
          <p-card>
            <ng-template pTemplate="header">
              <div class="task-header">
                <h3>{{ task.title }}</h3>
                <div class="task-actions">
                  <p-button icon="pi pi-pencil" (onClick)="startEditing(task)" styleClass="p-button-text"></p-button>
                  <p-button icon="pi pi-trash" (onClick)="deleteTask(task.id)" styleClass="p-button-text p-button-danger"></p-button>
                </div>
              </div>
            </ng-template>
            <p>{{ task.description }}</p>
          </p-card>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Task Dialog -->
  <p-dialog [(visible)]="showDialog" [style]="{width: '450px'}" header="Edit Task" [modal]="true" [draggable]="false" [resizable]="false">
    <div class="p-fluid" *ngIf="editingTask">
      <div class="field">
        <label for="editTitle">Title</label>
        <input id="editTitle" type="text" pInputText [(ngModel)]="editingTask.title">
      </div>
      <div class="field">
        <label for="editDescription">Description</label>
        <textarea id="editDescription" pInputTextarea [(ngModel)]="editingTask.description" rows="3"></textarea>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button label="Cancel" (onClick)="cancelEdit()" styleClass="p-button-text"></p-button>
      <p-button label="Save" (onClick)="saveEdit()"></p-button>
    </ng-template>
  </p-dialog>
</div> 